# 新dentaku

## 識別子
ユーザー定義の識別子（オペレーターおよび変数）
は基本的に特殊文字を含まない形にする。

```
id = first { rest }
first = 特殊文字数字以外
rest  = first | '.' | '-' | '_'
```

## 特殊文字のオペレーター

特殊文字のオペレーターは以下に限定する。
ユーザー定義はできない。

`--3`は単項演算子`-`と数値`-3`の並びと解釈する。

|オペレーター|種類|
|-|-|
|`+` `-` `*` `/` `%` `^`|算術演算|
|`==` `!=` `<` `<=` `>` `>=` `~` `!~`|比較演算|

## 単項演算子

単項演算子は以下の４種類とする。
'%'と'^'はない点に注意する。

|オペレーター|種類|集約方法|
|-|-|-|
|`+` |和|reduce|
|`-` |符号反転|map|
|`*` |積|reduce|
|`/` |逆数|map|

## ２項演算子

|オペレーター|種類|
|-|-|
|`+` |加算|
|`-` |減算|
|`*` |掛算|
|`/` |除算|
|`%` |剰余|
|`^` |べき乗|
|`==` `!=` `<` `<=` `>` `>=` `~` `!~`|比較演算|

# 数値定数

数値定数の文法は以下の通り。

```
number = [ '-' ]
         digits
         [ '.' digits ]
         [ ( 'e' | 'E' ) [ '+' | '-' ] digits ]
```
# select演算

並びの中から特定の値のみを抽出する。

## 単項演算子の例

偶数を抽出する。

```
  odd n = n % 2
  even n = not odd n
  even (0 to 5)
1 0 1 0 1 0
  @even (0 to 5)
0 2 4
```
## ２項演算子の例

２以上の要素を抽出する。

```
  0 to 5 > 2
0 0 0 1 1 1
  0 to 5 @> 2
3 4 5
  2 < (0 to 5)
0 0 0 1 1 1
  2 @< (0 to 5)
3 4 5
```